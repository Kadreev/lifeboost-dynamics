import{U as I,N as C,f as P,_ as y}from"./index.js";import{defineAsyncComponent as b,resolveComponent as d,openBlock as r,createElementBlock as a,Fragment as u,createBlock as s,resolveDynamicComponent as E,normalizeProps as x,mergeProps as f,createCommentVNode as h,renderList as k,withCtx as R,createVNode as w,guardReactiveProps as D}from"vue";import{g}from"./get-processed-block.77923ee6.js";const N=t=>`v-on:${t.toLowerCase()}`;function A(t,e){return n=>C({code:t,context:e.context,state:e.state,event:n})}function T(t){var e;const n={},l=(e=t.block.actions)!=null?e:{};for(const i in l){if(!l.hasOwnProperty(i))continue;const o=l[i];n[N(i)]=A(o,t)}return n}function O(t){var e;return{...(e=t.component)==null?void 0:e.options,...t.options,builderBlock:t}}function W(t){const e={};if(typeof t!="string")return e;const n=t.trim().split(/\\s+/);for(const l of n)e[l]=!0;return e}function L(t){var e;return{...t.properties,"builder-id":t.id,class:W([t.id,"builder-block",t.class,(e=t.properties)==null?void 0:e.class].filter(Boolean).join(" "))}}function $(){return{}}function H(t){return t.tagName||"div"}const V=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],G=t=>typeof t=="string"&&V.includes(t.toLowerCase()),U=()=>y(()=>import("./block-styles.867fd8f0.js"),["block-styles.867fd8f0.js","index.js","get-processed-block.77923ee6.js"]).then(t=>t.default).catch(t=>{throw console.error("Error while attempting to dynamically import component BlockStyles at ./block-styles.vue",t),t}),j=()=>y(()=>import("./render-component.7ca6729a.js"),["render-component.7ca6729a.js","index.js"]).then(t=>t.default).catch(t=>{throw console.error("Error while attempting to dynamically import component RenderComponent at ./render-component.vue",t),t}),z=()=>y(()=>import("./render-repeated-block.0b974ccc.js"),["render-repeated-block.0b974ccc.js","index.js"]).then(t=>t.default).catch(t=>{throw console.error("Error while attempting to dynamically import component RenderRepeatedBlock at ./render-repeated-block.vue",t),t}),F={name:"render-block",components:{"render-component":b(j),"render-repeated-block":b(z),"block-styles":b(U)},props:["block","context"],data:()=>({isEmptyHtmlElement:G,TARGET:I}),computed:{component(){var t;const e=(t=g({block:this.block,state:this.context.state,context:this.context.context,shouldEvaluateBindings:!1}).component)==null?void 0:t.name;if(!e)return null;const n=this.context.registeredComponents[e];if(n)return n;console.warn(`
        Could not find a registered component named "${e}". 
        If you registered it, is the file that registered it imported by the file that needs to render it?`)},componentInfo(){if(this.component){const{component:t,...e}=this.component;return e}else return},componentRef(){var t;return(t=this.component)==null?void 0:t.component},tagName(){return H(this.useBlock)},useBlock(){return this.repeatItemData?this.block:g({block:this.block,state:this.context.state,context:this.context.context,shouldEvaluateBindings:!0})},attributes(){return{...L(this.useBlock),...T({block:this.useBlock,state:this.context.state,context:this.context.context}),style:$(this.useBlock)}},shouldWrap(){var t;return!((t=this.componentInfo)!=null&&t.noWrap)},componentOptions(){return{...O(this.useBlock),...this.shouldWrap?{}:{attributes:this.attributes}}},renderComponentProps(){return{blockChildren:this.children,componentRef:this.componentRef,componentOptions:this.componentOptions,context:this.context}},children(){var t;return(t=this.useBlock.children)!=null?t:[]},childrenWithoutParentComponent(){return!this.componentRef&&!this.repeatItemData?this.children:[]},repeatItemData(){const{repeat:t,...e}=this.block;if(!(t!=null&&t.collection))return;const n=C({code:t.collection,state:this.context.state,context:this.context.context});if(!Array.isArray(n))return;const l=t.collection.split(".").pop(),i=t.itemName||(l?l+"Item":"item");return n.map((o,m)=>({context:{...this.context,state:{...this.context.state,$index:m,$item:o,[i]:o,[`$${i}Index`]:m}},block:e}))}}},S={key:1,class:"vue2-root-element-workaround"};function K(t,e,n,l,i,o){const m=d("render-repeated-block"),v=d("render-component"),_=d("render-block",!0),B=d("block-styles");return o.shouldWrap?(r(),a(u,{key:0},[t.isEmptyHtmlElement(o.tagName)?(r(),s(E(o.tagName),x(f({key:0},o.attributes)),null,16)):h("",!0),!t.isEmptyHtmlElement(o.tagName)&&t.TARGET==="vue2"&&o.repeatItemData?(r(),a("div",S,[(r(!0),a(u,null,k(o.repeatItemData,(c,p)=>(r(),s(m,{key:p,repeatContext:c.context,block:c.block},null,8,["repeatContext","block"]))),128))])):h("",!0),!t.isEmptyHtmlElement(o.tagName)&&t.TARGET!=="vue2"&&o.repeatItemData?(r(!0),a(u,{key:2},k(o.repeatItemData,(c,p)=>(r(),s(m,{key:p,repeatContext:c.context,block:c.block},null,8,["repeatContext","block"]))),128)):h("",!0),!t.isEmptyHtmlElement(o.tagName)&&!o.repeatItemData?(r(),s(E(o.tagName),x(f({key:3},o.attributes)),{default:R(()=>[w(v,x(D(o.renderComponentProps)),null,16),(r(!0),a(u,null,k(o.childrenWithoutParentComponent,(c,p)=>(r(),s(_,{key:"render-block-"+c.id,block:c,context:n.context},null,8,["block","context"]))),128)),(r(!0),a(u,null,k(o.childrenWithoutParentComponent,(c,p)=>(r(),s(B,{key:"block-style-"+c.id,block:c,context:n.context},null,8,["block","context"]))),128))]),_:1},16)):h("",!0)],64)):(r(),s(v,f({key:1},o.renderComponentProps,{context:n.context}),null,16,["context"]))}const Q=P(F,[["render",K]]);export{Q as default};
